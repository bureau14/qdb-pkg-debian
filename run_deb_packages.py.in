
import logging
import sys

from make_deb_packages import make_it_so

if __name__ == '__main__':
    try:

        # only run on Linux
        if sys.platform == "linux" or sys.platform == "linux2":
            logging.basicConfig(level=logging.DEBUG)

            src_dir = "@CMAKE_SOURCE_DIR@"
            binaries_dir = "@QDB_OUTPUT_DIRECTORY@"
            output_dir = "@QDB_OUTPUT_DIRECTORY@"
            version = "@CPACK_PACKAGE_VERSION@"

            make_it_so(src_dir, binaries_dir, output_dir, version)

    except BaseException as e:
        logging.error("exception caught: " + str(e))
        sys.exit(1)

    sys.exit(0)